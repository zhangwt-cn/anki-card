(function(){"use strict";var e={1963:function(e,t,a){var n=a(5130),o=a(6768);function l(e,t,a,n,l,r){const i=(0,o.g2)("router-view"),u=(0,o.g2)("n-message-provider");return(0,o.uX)(),(0,o.Wv)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(i)])),_:1})}var r={name:"App"},i=a(1241);const u=(0,i.A)(r,[["render",l]]);var s=u,d=a(1387);const p={style:{display:"flex","justify-content":"flex-end"}},c={key:0},g=(0,o.Lk)("br",null,null,-1);function f(e,t,a,n,l,r){const i=(0,o.g2)("n-icon"),u=(0,o.g2)("n-button"),s=(0,o.g2)("n-input"),d=(0,o.g2)("n-form-item"),f=(0,o.g2)("n-select"),b=(0,o.g2)("n-form"),v=(0,o.g2)("n-tab-pane"),m=(0,o.g2)("n-upload"),h=(0,o.g2)("n-gi"),y=(0,o.g2)("n-grid"),k=(0,o.g2)("AnkiCard"),A=(0,o.g2)("n-result"),w=(0,o.g2)("n-tabs"),_=(0,o.g2)("n-card"),F=(0,o.g2)("n-spin");return(0,o.uX)(),(0,o.Wv)(F,{show:e.show,delay:1e3},{default:(0,o.k6)((()=>[(0,o.bF)(_,{title:"Anki 卡片生成",style:{"margin-bottom":"16px"}},{default:(0,o.k6)((()=>[(0,o.bF)(u,{text:"",style:{"font-size":"24px"},tag:"a",href:"https://github.com/zhangwt-cn/anki-card"},{icon:(0,o.k6)((()=>[(0,o.bF)(i,{component:e.LogoGithub},null,8,["component"])])),_:1}),(0,o.bF)(w,{type:"line",value:e.selectedTab,"onUpdate:value":t[6]||(t[6]=t=>e.selectedTab=t),animated:""},{default:(0,o.k6)((()=>[(0,o.bF)(v,{name:"config",tab:"生成配置"},{default:(0,o.k6)((()=>[(0,o.bF)(b,{ref:"formRef",model:e.req,rules:e.rules,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",size:e.size,style:{maxWidth:"640px"}},{default:(0,o.k6)((()=>[(0,o.bF)(d,{label:"api 地址",path:"apiUrl"},{default:(0,o.k6)((()=>[(0,o.bF)(s,{value:e.req.apiUrl,"onUpdate:value":t[0]||(t[0]=t=>e.req.apiUrl=t),placeholder:"opeai 接口地址"},null,8,["value"])])),_:1}),(0,o.bF)(d,{label:"api key",path:"apiKey"},{default:(0,o.k6)((()=>[(0,o.bF)(s,{value:e.req.apiKey,"onUpdate:value":t[1]||(t[1]=t=>e.req.apiKey=t),placeholder:"接口 key"},null,8,["value"])])),_:1}),(0,o.bF)(d,{label:"模型",path:"model"},{default:(0,o.k6)((()=>[(0,o.bF)(f,{value:e.req.model,"onUpdate:value":t[2]||(t[2]=t=>e.req.model=t),placeholder:"mode",options:e.generalOptions},null,8,["value","options"])])),_:1}),(0,o.bF)(d,{label:"知识点资料",path:"material"},{default:(0,o.k6)((()=>[(0,o.bF)(s,{value:e.req.material,"onUpdate:value":t[3]||(t[3]=t=>e.req.material=t),placeholder:"知识点资料",type:"textarea",autosize:{minRows:3,maxRows:100}},null,8,["value"])])),_:1}),(0,o.Lk)("div",p,[(0,o.bF)(u,{round:"",type:"primary",onClick:t[4]||(t[4]=t=>e.handleValidateButtonClick(e.model))},{default:(0,o.k6)((()=>[(0,o.eW)(" 生成 ")])),_:1})])])),_:1},8,["model","rules","size"])])),_:1}),(0,o.bF)(v,{name:"result",tab:"生成结果"},{default:(0,o.k6)((()=>[e.ankiCardList.length>0?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.bF)(y,{"x-gap":"12"},{default:(0,o.k6)((()=>[(0,o.bF)(h,{span:6},{default:(0,o.k6)((()=>[(0,o.bF)(m,{"default-file-list":e.fileList,"list-type":"text","show-download-button":"",onDownload:e.handleDownload},null,8,["default-file-list","onDownload"])])),_:1})])),_:1}),g,(0,o.bF)(k,{cards:e.ankiCardList},null,8,["cards"])])):(0,o.Q3)("",!0),0==e.ankiCardList.length?((0,o.uX)(),(0,o.Wv)(A,{key:1,status:"info",title:"卡片未生成",description:"别着急，生成之后再看"},{footer:(0,o.k6)((()=>[(0,o.bF)(u,{onClick:t[5]||(t[5]=t=>e.changeTab("config"))},{default:(0,o.k6)((()=>[(0,o.eW)("去生成卡片")])),_:1})])),_:1})):(0,o.Q3)("",!0)])),_:1})])),_:1},8,["value"])])),_:1})])),_:1},8,["show"])}a(4603),a(7566),a(8721);var b=a(144),v=a(4232);const m=(0,o.Lk)("br",null,null,-1);function h(e,t,a,n,l,r){const i=(0,o.g2)("n-ellipsis"),u=(0,o.g2)("n-card"),s=(0,o.g2)("n-grid-item"),d=(0,o.g2)("n-grid"),p=(0,o.g2)("n-pagination"),c=(0,o.g2)("n-space");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(d,{"x-gap":12,"y-gap":8,cols:5},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.paginatedData,(e=>((0,o.uX)(),(0,o.Wv)(s,{key:e.id},{default:(0,o.k6)((()=>[(0,o.bF)(u,{hoverable:"",size:"huge",segmented:{content:!0,footer:"soft"}},{footer:(0,o.k6)((()=>[(0,o.bF)(i,{"line-clamp":1},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(e.answer),1)])),_:2},1024)])),default:(0,o.k6)((()=>[(0,o.bF)(i,{"line-clamp":1},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(e.question),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),m,(0,o.bF)(c,{justify:"center"},{default:(0,o.k6)((()=>[e.pageCount>0?((0,o.uX)(),(0,o.Wv)(p,{key:0,page:e.page,"page-size":e.pageSize,"page-count":e.pageCount,"onUpdate:page":e.handlePageChange},null,8,["page","page-size","page-count","onUpdate:page"])):(0,o.Q3)("",!0)])),_:1})],64)}var y=a(4620),k=a(7033),A=a(2169),w=a(2701),_=(0,o.pM)({name:"AnkiCard",props:{cards:{type:Array,required:!0,default:()=>[]}},components:{NCard:y.Ay,NPagination:k.A,NSpace:A.A,NEllipsis:w.Ay},setup(e){const t=(0,b.KR)(1),a=(0,b.KR)(15),n=(0,o.EW)((()=>{const n=(t.value-1)*a.value;return e.cards.slice(n,n+a.value)})),l=(0,o.EW)((()=>0===e.cards.length?0:Math.ceil(e.cards.length/a.value))),r=e=>{t.value=e};return{page:t,pageSize:a,paginatedData:n,pageCount:l,handlePageChange:r}}});const F=(0,i.A)(_,[["render",h]]);var C=F,x=a(9648),q=a(496),R=a(8911),K=a(2384),N=a(4390),O=a(8572),U=a(4880),L=a(3980),j=a(4367),z=a(5829),T=a(4373);const W=window.location.protocol,E=window.location.hostname,S=window.location.port?`:${window.location.port}`:"",P=`${W}//${E}${S}`,X=T.A.create({baseURL:P,timeout:12e5,headers:{"Content-Type":"application/json"}});var M=X,$=a(7387),D=a(7966),B=a(4083),I=(0,o.pM)({components:{NCard:y.Ay,NTabs:x.A,NTabPane:q.A,NForm:R.A,NFormItem:K.Ay,NInput:N.A,NSelect:O.A,NButton:U.Ay,NSpin:L.A,NUpload:j.A,NResult:z.A,NIcon:D._,AnkiCard:C},setup(){const e=(0,b.KR)(null),t=(0,b.KR)({apiUrl:"https://api.openai.com/v1/chat/completions",apiKey:"",model:"gpt-4o",material:""}),a=(0,b.KR)([]),n=(0,b.KR)("config"),o=(0,$.J)(),l=(0,b.KR)(!1),r=(0,b.KR)([]),i=e=>{n.value=e};return{ankiCardList:a,fileList:r,formRef:e,selectedTab:n,show:l,size:(0,b.KR)("medium"),req:t,LogoGithub:B.A,generalOptions:["gpt-4o","gpt-3.5-turbo-0125","gpt-4-turbo"].map((e=>({label:e,value:e}))),rules:{apiUrl:{required:!0,trigger:["blur","input"],message:"请输入接口地址"},apiKey:{required:!0,trigger:["blur","input"],message:"请输入接口key"},material:{required:!0,trigger:["blur","input"],message:"请输入需要处理的资料"},model:{required:!0,trigger:["blur","change"],message:"请选择模型"}},async handleValidateButtonClick(){e.value?.validate((async e=>{if(!e){l.value=!0;try{const e=await M.post("/api/v1/card/generate",t.value);if(console.log(e.data),200!==e.data?.code)return void o.error(e.data?.message||"生成失败，请检查配置");a.value=e.data.data,n.value="result";const l=a.value.map((e=>`${e.question}\t${e.answer}`)).join("\n"),i=new Blob([l],{type:"text/plain"}),u=URL.createObjectURL(i);r.value=[{id:"a",name:"anki_cards.txt",status:"finished",url:u}]}catch(i){console.error("Error posting data:",i),o.error("生成失败，请检查配置")}finally{l.value=!1}}}))},changeTab:i}}});const Q=(0,i.A)(I,[["render",f]]);var G=Q;const V=[{path:"/",component:G}],J=(0,d.aE)({history:(0,d.LA)(),routes:V});var H=J,Y=a(7275),Z=a(9531),ee=a(71),te=a(732),ae=a(6233),ne=a(8122);const oe=(0,Y.A)({components:[U.Ay,N.A,Z.A,ee.A,te.Ay,K.Ay,R.A,ae.A,ne.A,O.A]}),le=(0,n.Ef)(s);le.use(oe),le.use(H),le.mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,l){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],l=e[d][2];for(var i=!0,u=0;u<n.length;u++)(!1&l||r>=l)&&Object.keys(a.O).every((function(e){return a.O[e](n[u])}))?n.splice(u--,1):(i=!1,l<r&&(r=l));if(i){e.splice(d--,1);var s=o();void 0!==s&&(t=s)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[n,o,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,l,r=n[0],i=n[1],u=n[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(u)var d=u(a)}for(t&&t(n);s<r.length;s++)l=r[s],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(d)},n=self["webpackChunkanki_card_web"]=self["webpackChunkanki_card_web"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(1963)}));n=a.O(n)})();